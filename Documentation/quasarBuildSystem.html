<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">.lst-kix_6o9r0274l4qg-1>li:before{content:"\0025cb  "}.lst-kix_6o9r0274l4qg-2>li:before{content:"\0025a0  "}.lst-kix_6o9r0274l4qg-3>li:before{content:"\0025cf  "}.lst-kix_6o9r0274l4qg-5>li:before{content:"\0025a0  "}.lst-kix_6o9r0274l4qg-4>li:before{content:"\0025cb  "}.lst-kix_tdm04nsxcy8q-5>li{counter-increment:lst-ctn-kix_tdm04nsxcy8q-5}ol.lst-kix_tdm04nsxcy8q-0{list-style-type:none}ol.lst-kix_tdm04nsxcy8q-1{list-style-type:none}ul.lst-kix_c79ho0blhc8k-0{list-style-type:none}.lst-kix_8sxsy1a8ths3-8>li:before{content:"\0025a0  "}.lst-kix_6o9r0274l4qg-7>li:before{content:"\0025cb  "}ol.lst-kix_tdm04nsxcy8q-4{list-style-type:none}ul.lst-kix_c79ho0blhc8k-2{list-style-type:none}ol.lst-kix_tdm04nsxcy8q-5{list-style-type:none}ul.lst-kix_c79ho0blhc8k-1{list-style-type:none}ol.lst-kix_tdm04nsxcy8q-2{list-style-type:none}ul.lst-kix_c79ho0blhc8k-4{list-style-type:none}.lst-kix_6o9r0274l4qg-6>li:before{content:"\0025cf  "}ol.lst-kix_tdm04nsxcy8q-3{list-style-type:none}ul.lst-kix_c79ho0blhc8k-3{list-style-type:none}.lst-kix_6o9r0274l4qg-8>li:before{content:"\0025a0  "}ol.lst-kix_tdm04nsxcy8q-2.start{counter-reset:lst-ctn-kix_tdm04nsxcy8q-2 0}ol.lst-kix_tdm04nsxcy8q-8.start{counter-reset:lst-ctn-kix_tdm04nsxcy8q-8 0}.lst-kix_tdm04nsxcy8q-7>li{counter-increment:lst-ctn-kix_tdm04nsxcy8q-7}.lst-kix_ytm01fwibfq9-0>li:before{content:"\0025cf  "}.lst-kix_ytm01fwibfq9-1>li:before{content:"\0025cb  "}.lst-kix_tdm04nsxcy8q-4>li{counter-increment:lst-ctn-kix_tdm04nsxcy8q-4}ol.lst-kix_tdm04nsxcy8q-5.start{counter-reset:lst-ctn-kix_tdm04nsxcy8q-5 0}ul.lst-kix_ytm01fwibfq9-2{list-style-type:none}.lst-kix_ytm01fwibfq9-3>li:before{content:"\0025cf  "}ul.lst-kix_ytm01fwibfq9-3{list-style-type:none}ul.lst-kix_8sxsy1a8ths3-8{list-style-type:none}ul.lst-kix_ytm01fwibfq9-0{list-style-type:none}.lst-kix_ytm01fwibfq9-2>li:before{content:"\0025a0  "}.lst-kix_ytm01fwibfq9-4>li:before{content:"\0025cb  "}ul.lst-kix_ytm01fwibfq9-1{list-style-type:none}ul.lst-kix_ytm01fwibfq9-6{list-style-type:none}ul.lst-kix_ytm01fwibfq9-7{list-style-type:none}ul.lst-kix_ytm01fwibfq9-4{list-style-type:none}ul.lst-kix_ytm01fwibfq9-5{list-style-type:none}.lst-kix_ytm01fwibfq9-6>li:before{content:"\0025cf  "}ul.lst-kix_ytm01fwibfq9-8{list-style-type:none}.lst-kix_ytm01fwibfq9-5>li:before{content:"\0025a0  "}ul.lst-kix_6o9r0274l4qg-0{list-style-type:none}ul.lst-kix_6o9r0274l4qg-1{list-style-type:none}ul.lst-kix_6o9r0274l4qg-4{list-style-type:none}.lst-kix_tdm04nsxcy8q-5>li:before{content:"" counter(lst-ctn-kix_tdm04nsxcy8q-5,lower-roman) ". "}ul.lst-kix_6o9r0274l4qg-5{list-style-type:none}ul.lst-kix_6o9r0274l4qg-2{list-style-type:none}ul.lst-kix_6o9r0274l4qg-3{list-style-type:none}ul.lst-kix_6o9r0274l4qg-8{list-style-type:none}.lst-kix_tdm04nsxcy8q-3>li:before{content:"" counter(lst-ctn-kix_tdm04nsxcy8q-3,decimal) ". "}.lst-kix_tdm04nsxcy8q-7>li:before{content:"" counter(lst-ctn-kix_tdm04nsxcy8q-7,lower-latin) ". "}ol.lst-kix_tdm04nsxcy8q-4.start{counter-reset:lst-ctn-kix_tdm04nsxcy8q-4 0}ul.lst-kix_6o9r0274l4qg-6{list-style-type:none}.lst-kix_tdm04nsxcy8q-4>li:before{content:"" counter(lst-ctn-kix_tdm04nsxcy8q-4,lower-latin) ". "}.lst-kix_tdm04nsxcy8q-8>li:before{content:"" counter(lst-ctn-kix_tdm04nsxcy8q-8,lower-roman) ". "}ul.lst-kix_6o9r0274l4qg-7{list-style-type:none}.lst-kix_ytm01fwibfq9-7>li:before{content:"\0025cb  "}.lst-kix_ytm01fwibfq9-8>li:before{content:"\0025a0  "}.lst-kix_tdm04nsxcy8q-6>li:before{content:"" counter(lst-ctn-kix_tdm04nsxcy8q-6,decimal) ". "}.lst-kix_tdm04nsxcy8q-6>li{counter-increment:lst-ctn-kix_tdm04nsxcy8q-6}.lst-kix_tdm04nsxcy8q-3>li{counter-increment:lst-ctn-kix_tdm04nsxcy8q-3}ol.lst-kix_tdm04nsxcy8q-8{list-style-type:none}ol.lst-kix_tdm04nsxcy8q-6{list-style-type:none}ol.lst-kix_tdm04nsxcy8q-7{list-style-type:none}.lst-kix_tdm04nsxcy8q-0>li{counter-increment:lst-ctn-kix_tdm04nsxcy8q-0}ol.lst-kix_tdm04nsxcy8q-3.start{counter-reset:lst-ctn-kix_tdm04nsxcy8q-3 0}ol.lst-kix_tdm04nsxcy8q-6.start{counter-reset:lst-ctn-kix_tdm04nsxcy8q-6 0}.lst-kix_r3new9a30ppi-8>li:before{content:"\0025a0  "}.lst-kix_r3new9a30ppi-6>li:before{content:"\0025cf  "}.lst-kix_r3new9a30ppi-7>li:before{content:"\0025cb  "}.lst-kix_r3new9a30ppi-3>li:before{content:"\0025cf  "}.lst-kix_r3new9a30ppi-4>li:before{content:"\0025cb  "}.lst-kix_r3new9a30ppi-5>li:before{content:"\0025a0  "}ul.lst-kix_r3new9a30ppi-1{list-style-type:none}ul.lst-kix_r3new9a30ppi-0{list-style-type:none}.lst-kix_ay3zsv6x7td8-4>li:before{content:"\0025cb  "}.lst-kix_ay3zsv6x7td8-5>li:before{content:"\0025a0  "}ul.lst-kix_r3new9a30ppi-3{list-style-type:none}ul.lst-kix_r3new9a30ppi-2{list-style-type:none}.lst-kix_ay3zsv6x7td8-2>li:before{content:"\0025a0  "}.lst-kix_ay3zsv6x7td8-6>li:before{content:"\0025cf  "}.lst-kix_tdm04nsxcy8q-0>li:before{content:"" counter(lst-ctn-kix_tdm04nsxcy8q-0,decimal) ". "}.lst-kix_tdm04nsxcy8q-1>li:before{content:"" counter(lst-ctn-kix_tdm04nsxcy8q-1,lower-latin) ". "}.lst-kix_r3new9a30ppi-2>li:before{content:"\0025a0  "}ul.lst-kix_r3new9a30ppi-8{list-style-type:none}ul.lst-kix_r3new9a30ppi-5{list-style-type:none}.lst-kix_r3new9a30ppi-0>li:before{content:"\0025cf  "}.lst-kix_r3new9a30ppi-1>li:before{content:"\0025cb  "}ul.lst-kix_r3new9a30ppi-4{list-style-type:none}.lst-kix_ay3zsv6x7td8-3>li:before{content:"\0025cf  "}ul.lst-kix_r3new9a30ppi-7{list-style-type:none}.lst-kix_tdm04nsxcy8q-2>li:before{content:"" counter(lst-ctn-kix_tdm04nsxcy8q-2,lower-roman) ". "}ul.lst-kix_r3new9a30ppi-6{list-style-type:none}.lst-kix_c79ho0blhc8k-1>li:before{content:"\0025cb  "}.lst-kix_c79ho0blhc8k-0>li:before{content:"\0025cf  "}ul.lst-kix_8sxsy1a8ths3-1{list-style-type:none}ul.lst-kix_8sxsy1a8ths3-0{list-style-type:none}.lst-kix_ay3zsv6x7td8-8>li:before{content:"\0025a0  "}ul.lst-kix_8sxsy1a8ths3-3{list-style-type:none}ul.lst-kix_8sxsy1a8ths3-2{list-style-type:none}ul.lst-kix_8sxsy1a8ths3-5{list-style-type:none}ul.lst-kix_8sxsy1a8ths3-4{list-style-type:none}.lst-kix_ay3zsv6x7td8-7>li:before{content:"\0025cb  "}ul.lst-kix_8sxsy1a8ths3-7{list-style-type:none}.lst-kix_tdm04nsxcy8q-1>li{counter-increment:lst-ctn-kix_tdm04nsxcy8q-1}ul.lst-kix_8sxsy1a8ths3-6{list-style-type:none}.lst-kix_c79ho0blhc8k-8>li:before{content:"\0025a0  "}.lst-kix_tdm04nsxcy8q-2>li{counter-increment:lst-ctn-kix_tdm04nsxcy8q-2}.lst-kix_tdm04nsxcy8q-8>li{counter-increment:lst-ctn-kix_tdm04nsxcy8q-8}.lst-kix_c79ho0blhc8k-3>li:before{content:"\0025cf  "}.lst-kix_c79ho0blhc8k-2>li:before{content:"\0025a0  "}.lst-kix_c79ho0blhc8k-4>li:before{content:"\0025cb  "}.lst-kix_c79ho0blhc8k-5>li:before{content:"\0025a0  "}.lst-kix_ay3zsv6x7td8-0>li:before{content:"\0025cf  "}.lst-kix_ay3zsv6x7td8-1>li:before{content:"\0025cb  "}ol.lst-kix_tdm04nsxcy8q-1.start{counter-reset:lst-ctn-kix_tdm04nsxcy8q-1 0}.lst-kix_c79ho0blhc8k-7>li:before{content:"\0025cb  "}.lst-kix_c79ho0blhc8k-6>li:before{content:"\0025cf  "}ul.lst-kix_ay3zsv6x7td8-4{list-style-type:none}ol.lst-kix_tdm04nsxcy8q-0.start{counter-reset:lst-ctn-kix_tdm04nsxcy8q-0 0}ul.lst-kix_ay3zsv6x7td8-5{list-style-type:none}ul.lst-kix_ay3zsv6x7td8-6{list-style-type:none}.lst-kix_8sxsy1a8ths3-0>li:before{content:"\0025cf  "}ul.lst-kix_ay3zsv6x7td8-7{list-style-type:none}ul.lst-kix_ay3zsv6x7td8-8{list-style-type:none}.lst-kix_8sxsy1a8ths3-1>li:before{content:"\0025cb  "}ul.lst-kix_c79ho0blhc8k-6{list-style-type:none}ul.lst-kix_c79ho0blhc8k-5{list-style-type:none}ul.lst-kix_c79ho0blhc8k-8{list-style-type:none}ul.lst-kix_c79ho0blhc8k-7{list-style-type:none}ul.lst-kix_ay3zsv6x7td8-0{list-style-type:none}ul.lst-kix_ay3zsv6x7td8-1{list-style-type:none}ul.lst-kix_ay3zsv6x7td8-2{list-style-type:none}.lst-kix_8sxsy1a8ths3-7>li:before{content:"\0025cb  "}ul.lst-kix_ay3zsv6x7td8-3{list-style-type:none}ol.lst-kix_tdm04nsxcy8q-7.start{counter-reset:lst-ctn-kix_tdm04nsxcy8q-7 0}.lst-kix_8sxsy1a8ths3-6>li:before{content:"\0025cf  "}.lst-kix_8sxsy1a8ths3-5>li:before{content:"\0025a0  "}.lst-kix_8sxsy1a8ths3-2>li:before{content:"\0025a0  "}.lst-kix_8sxsy1a8ths3-4>li:before{content:"\0025cb  "}.lst-kix_8sxsy1a8ths3-3>li:before{content:"\0025cf  "}.lst-kix_6o9r0274l4qg-0>li:before{content:"\0025cf  "}ol{margin:0;padding:0}table td,table th{padding:0}.c2{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;background-color:#666666;border-left-style:solid;border-bottom-width:1pt;width:102.8pt;border-top-color:#000000;border-bottom-style:solid}.c28{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:61.5pt;border-top-color:#000000;border-bottom-style:solid}.c14{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:195.8pt;border-top-color:#000000;border-bottom-style:solid}.c42{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:267pt;border-top-color:#000000;border-bottom-style:solid}.c8{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:42pt;border-top-color:#000000;border-bottom-style:solid}.c1{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:92.2pt;border-top-color:#000000;border-bottom-style:solid}.c13{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:102.8pt;border-top-color:#000000;border-bottom-style:solid}.c35{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:201pt;border-top-color:#000000;border-bottom-style:solid}.c31{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:272.2pt;border-top-color:#000000;border-bottom-style:solid}.c23{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:77.2pt;border-top-color:#000000;border-bottom-style:solid}.c7{margin-left:36pt;padding-top:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c6{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Arial";font-style:normal}.c12{padding-top:20pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c4{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:"Arial";font-style:normal}.c5{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c22{color:#ffffff;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c10{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left;height:11pt}.c17{color:#ffffff;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Arial";font-style:italic}.c15{color:#000000;text-decoration:none;vertical-align:baseline;font-size:11pt;font-style:normal}.c9{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c40{padding-top:0pt;padding-bottom:10pt;line-height:1.15;text-align:left}.c16{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c32{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline}.c24{border-spacing:0;border-collapse:collapse;margin-right:auto}.c19{margin-left:72pt;padding-left:0pt;orphans:2;widows:2}.c29{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:center}.c18{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c0{padding:0;margin:0}.c36{color:inherit;text-decoration:inherit}.c3{font-weight:400;font-family:"Courier New"}.c20{orphans:2;widows:2}.c21{background-color:#666666}.c37{height:55pt}.c39{height:50pt}.c33{text-indent:36pt}.c27{height:33pt}.c41{margin-left:36pt}.c25{font-style:italic}.c34{height:36pt}.c26{height:24pt}.c38{height:43pt}.c11{height:0pt}.c30{font-weight:700}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c18"><p class="c16 c20"><span>Written by: Piotr P. Nikiel &lt;</span><span class="c32"><a class="c36" href="mailto:piotr@nikiel.info">piotr@nikiel.info</a></span><span class="c5">&gt; Jan-Feb 2019</span></p><p class="c16 c20"><span class="c5">Reviewed and improved by: Paris Moschovakos, Ben Farnham, Stefan Schlenker</span></p><h1 class="c12" id="h.4qiakb200pno"><span class="c25">quasar</span><span class="c4">, quasar-based servers and the build system</span></h1><p class="c16 c20"><span class="c25">quasar</span><span class="c5">&nbsp;is a framework for rapid and efficient development of (quasar-based) OPC-UA servers in the C++ programming language. A build system must accompany a framework like quasar to offload its users from tasks like:</span></p><ul class="c0 lst-kix_ay3zsv6x7td8-0 start"><li class="c7"><span class="c5">compiling the software (i.e. running the compiler on a set of sources, passing options, running linkers etc.)</span></li><li class="c7"><span class="c5">guaranteeing coherency of builds (i.e. a changed source file must be recompiled, possibly triggering additional steps in the dependency chain)</span></li><li class="c7"><span class="c5">guaranteeing efficiency of builds (i.e. it&#39;s not necessary to recompile a file that has not been changed)</span></li><li class="c7"><span class="c5">handling build portability among different operating systems, compilers (including cross compilers), environments, versions of required libraries, architectures</span></li><li class="c7"><span class="c5">integrating the server build system as a part of another, parent build system.</span></li></ul><h1 class="c12" id="h.or0tfi7zyuzz"><span class="c4">CMake as quasar&#39;s build system workhorse</span></h2><p class="c10"><span class="c5"></span></p><p class="c16 c20"><span>CMake has been quasar&#39;s build system workhorse since quasar&#39;s beginnings. For details on CMake please refer to its webpage, </span><span class="c32"><a class="c36" href="https://www.google.com/url?q=https://cmake.org/&amp;sa=D&amp;ust=1585222770886000">https://cmake.org/</a></span><span class="c5">.</span></p><p class="c10"><span class="c5"></span></p><p class="c16 c20"><span class="c5">The following features of CMake made it an attractive candidate:</span></p><ul class="c0 lst-kix_8sxsy1a8ths3-0 start"><li class="c7"><span class="c5">widespread usage in industry which usually means availability of experience, knowledge and developers familiarized with it</span></li><li class="c7"><span class="c5">widespread usage at CERN</span></li><li class="c7"><span class="c5">previous positive experience</span></li><li class="c7"><span class="c5">it&#39;s free and it&#39;s open-source software</span></li><li class="c7"><span class="c5">support for different operating systems, compilers, architectures.</span></li></ul><h1 class="c12" id="h.cpwsmk78s770"><span class="c4">How CMake is wrapped by quasar and why</span></h2><p class="c16 c20"><span>For most use-cases, quasar end-users generate compiler specific build instructions (think unix makefiles, or visual studio solution files) and invoke the corresponding builds entirely via the standard quasar command line interface. That is to say, via the command line instruction </span><span class="c3">python quasar.py build</span><span class="c5">. In these use-cases, the end-user never directly invokes cmake; quasar&rsquo;s internal scripts handle this.</span></p><p class="c10"><span class="c5"></span></p><p class="c16 c20"><span>The reason for it is that, by quasar design, source files (e.g. Address Space classes, Device classes&hellip;) for different quasar classes live in source files whose names are dependent on quasar </span><span class="c3">Design.xml</span><span class="c5">&nbsp;and CMake doesn&#39;t support dynamically created lists of files to compile. Some hacks exist to do this natively in CMake but their robustness and future availability is questionable.</span></p><p class="c10"><span class="c5"></span></p><p class="c16 c20"><span class="c5">Therefore quasar.py (quasar&#39;s user entry point) wraps the missing part and:</span></p><ol class="c0 lst-kix_tdm04nsxcy8q-0 start" start="1"><li class="c7"><span class="c5">generates Design-dependent list of files for Address Space and Device modules,</span></li><li class="c7"><span class="c5">runs CMake in the build (= binary) directory.</span></li></ol><p class="c10"><span class="c5"></span></p><p class="c16 c20"><span>However, certain build modes (e.g. Yocto/PetaLinux) require that CMake </span><span class="c25">is</span><span class="c5">&nbsp;the build entry point. In such a case the actions from point 1 above can be manually triggered by the user and their deliverables can be stored in the server repository. Detailed usage mode is discussed in the Yocto/PetaLinux tutorial of quasar.</span></p><h1 class="c12" id="h.food0epcxc4"><span class="c4">How are server sources organized?</span></h2><p class="c16 c20"><span class="c5">Sources of a quasar-based server are organized in modules. Each module is stored in a separate directory under the quasar server parent directory. There are three types of modules:</span></p><ul class="c0 lst-kix_c79ho0blhc8k-0 start"><li class="c7"><span class="c30">native</span><span><br>These are compulsory modules of any quasar-based server. The build system knows about them intrinsically. At the time of writing, they comprise of: </span><span class="c3">AddressSpace</span><span>, </span><span class="c3">CalculatedVariables</span><span>, </span><span class="c3">Configuration</span><span>, </span><span class="c3">Device</span><span>, </span><span class="c3">LogIt</span><span>, </span><span class="c3">Meta </span><span>and </span><span class="c3">Server</span><span class="c5">.</span></li><li class="c7"><span class="c30">optional</span><span><br>These are modules which are deployed by quasar&#39;s &quot;optional modules&quot; mechanism. The build system knows about them because the user selects them using quasar.py commands such as enable_module or disable_module. A detailed documentation of optional modules is available &hellip; </span><span class="c15 c3">&lt;place link to HTML&gt;</span></li><li class="c7"><span class="c30">custom</span><span class="c5"><br>These are modules which are entirely under user&#39;s responsibility, but thanks to using the same architecture like aforementioned native and optional modules, they can be easily included in the server build process.</span></li></ul><p class="c16 c20 c41"><span class="c5">The architecture defines organization of quasar modules:</span></p><ul class="c0 lst-kix_c79ho0blhc8k-1 start"><li class="c16 c19"><span>header files are in </span><span class="c3">include/</span><span class="c5">&nbsp;(quasar build system will include this directory for any enabled module)</span></li><li class="c16 c19"><span>source files are in </span><span class="c15 c3">src/</span></li><li class="c16 c19"><span>there is a </span><span class="c3">CMakeLists.txt</span><span>&nbsp;per each module which is integrated by the parent using </span><span class="c15 c3">add_subdirectory</span></li><li class="c16 c19"><span class="c5">other common subdirectories are: doc (documentation), extra (supplementary files for additional functionality), py (for python code) etc.</span></li></ul><p class="c16 c20 c33"><span class="c5">Custom module deployment is comprised of:</span></p><ul class="c0 lst-kix_c79ho0blhc8k-1"><li class="c16 c19"><span class="c5">deployment of module sources<br>We recommend &quot;git submodules&quot; mechanism for custom modules which are shared among multiple projects and direct placement of sources for custom modules which are not to be shared among multiple projects.</span></li><li class="c16 c19"><span>enabling of a module in the build system<br>The custom module name should be appended to variable </span><span class="c3">CUSTOM_SERVER_MODULES</span><span>&nbsp;in the file </span><span class="c3">ProjectSettings.cmake</span><span class="c5">&nbsp;</span></li></ul><p class="c16 c20 c41"><span class="c5">After both steps the quasar build system will take the custom module into account.</span></p><h1 class="c12" id="h.sg2g3wd2rr0v"><span class="c4">Summary of build modes available in quasar</span></h2><a id="t.e2144b47e855e5c6b25a02368fae06a581fc267e"></a><a id="t.0"></a><table class="c24"><tbody><tr class="c27"><td class="c2" colspan="1" rowspan="1"><p class="c16"><span class="c17">Mode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td class="c8 c21" colspan="1" rowspan="1"><p class="c16"><span class="c17">For embedded</span></p></td><td class="c1 c21" colspan="1" rowspan="1"><p class="c16"><span class="c17">Toolset (compiler, linker, etc.)</span></p></td><td class="c23 c21" colspan="1" rowspan="1"><p class="c16"><span class="c17">Build entry point</span></p></td><td class="c1 c21" colspan="1" rowspan="1"><p class="c16"><span class="c17">Known Users</span></p></td><td class="c21 c28" colspan="1" rowspan="1"><p class="c16"><span class="c17">Special restriction</span></p></td></tr><tr class="c34"><td class="c13" colspan="1" rowspan="1"><p class="c16"><span class="c6">Native build on x64</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c29"><span class="c6">N</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c16"><span class="c6">system default or user chosen (e.g. LCG)</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c16"><span class="c6">quasar build</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c16"><span class="c6">Most of deployments for Linux and Windows</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c29"><span class="c6">-</span></p></td></tr><tr class="c38"><td class="c13" colspan="1" rowspan="1"><p class="c16"><span class="c6">Cross-compiler mode</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c29"><span class="c6">Y</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c16"><span class="c6">Controlled by separate toolchain file (CC, CXX, sysroot, flags, &hellip;)</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c16"><span class="c6">quasar build</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c16"><span class="c6">No production deployments now.</span></p><p class="c16"><span class="c6">Dev for RPi and RCE.</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c16"><span class="c6">open62541 preferred</span></p></td></tr><tr class="c26"><td class="c13" colspan="1" rowspan="1"><p class="c16"><span class="c6">Yocto mode (covers PetaLinux)</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c29"><span class="c6">Y</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c16"><span class="c6">Yocto-built</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c16"><span class="c6">yocto and CMake-level integration (NO quasar build)</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c16"><span class="c6">Planned production:</span></p><p class="c16"><span class="c6">gFEX monitoring,</span></p><p class="c16"><span class="c6">ELMB++ receiver</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c16"><span class="c6">open62541 only</span></p></td></tr><tr class="c37"><td class="c13" colspan="1" rowspan="1"><p class="c16"><span class="c6">Embeddable server (compiles server as a shared object)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c29"><span class="c6">depends</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c16"><span class="c6">Embedder decision (e.g. for Python match given Python version &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;API/ABI...)</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c16"><span class="c6">1st step: quasar build</span></p><p class="c16"><span class="c6">2nd step: embedder dependent</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c16"><span class="c6">eFEX prototype</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c29"><span class="c6">-</span></p></td></tr><tr class="c39"><td class="c13" colspan="1" rowspan="1"><p class="c16"><span class="c6">Native build but on unusual architecture (e.g. ARM)</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c29"><span class="c6">Y</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c16"><span class="c6">system default&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c16"><span class="c6">quasar build</span></p></td><td class="c1" colspan="1" rowspan="1"><p class="c16"><span class="c6">MuCTPi</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c16"><span class="c6">open62541 preferred,</span></p><p class="c16"><span class="c6">possibly no network</span></p></td></tr></tbody></table><h1 class="c12" id="h.cvkzi04witjf"><span class="c4">Build configuration files</span></h2><p class="c16 c20"><span>A build configuration file is a CMake script defining (typically using the </span><span class="c3">set()</span><span class="c5">&nbsp;statement) the configuration of a build. The aspects typically covered by build configs are:</span></p><ul class="c0 lst-kix_ytm01fwibfq9-0 start"><li class="c7"><span class="c5">Path to OPC-UA stack (if used)</span></li><li class="c7"><span>Path to boost headers and libs and list of libraries to link against if they cannot be automatically resolved. Note that by default, the quasar cmake engine uses </span><span class="c3">FindBoost </span><span>to resolve boost header and lib locations. To set a custom boost location use the </span><span class="c3">BOOST_ROOT</span><span>&nbsp;environment variable. See also the paragraph about </span><span class="c3">ProjectSettings.cmake</span><span class="c5">&nbsp;below.</span></li><li class="c7"><span>Additional compiler defines (e.g. </span><span class="c3">-fPIC</span><span>&nbsp;or </span><span class="c3">-Wall</span><span class="c5">&nbsp;or so).</span></li></ul><p class="c16 c20"><span class="c5">In addition, path(s) to cross-compilers and their sysroot(s) are often specified there.</span></p><p class="c10"><span class="c5"></span></p><p class="c16 c20"><span class="c5">You can have (store) multiple build configuration files because one OPC-UA server project might be built to suit requirements of different clients. For instance, you can have one build config for Windows Server 2012, one config for Windows 10, one config for Ubuntu and one for cross-compiling for Raspian.</span></p><p class="c10"><span class="c5"></span></p><p class="c20 c40"><span>To switch between different build configs, use &quot;</span><span class="c3">quasar.py set_build_config</span><span>&quot; command. Note that &quot;</span><span class="c3">quasar.py build</span><span class="c5">&quot; will always use the recently chosen build config.</span></p><p class="c16 c20"><span class="c5">The following optional variables/settings may be used to influence the build process:</span></p><p class="c10"><span class="c5"></span></p><a id="t.86615d8c1731a59dab167ceb4ae77a50a9092e70"></a><a id="t.1"></a><table class="c24"><tbody><tr class="c11"><td class="c35 c21" colspan="1" rowspan="1"><p class="c9"><span class="c22">Setting name</span></p></td><td class="c42 c21" colspan="1" rowspan="1"><p class="c9"><span class="c22">Meaning</span></p></td></tr><tr class="c11"><td class="c35" colspan="1" rowspan="1"><p class="c9"><span class="c15 c3">IGNORE_DEFAULT_BOOST_SETUP</span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c9"><span>By default, quasar tries to resolve boost dependencies automatically using CMake&#39;s FindBoost function (see also setting </span><span class="c3">ADDITIONAL_BOOST_LIBS</span><span>&nbsp;below). By setting this variable to ON, no automatic boost resolution is attempted and must be explicitly done within the build config. Note that if this setting is activated, the project setting </span><span class="c3">ADDITIONAL_BOOST_LIBS</span><span class="c5">&nbsp;has no effect.</span></p></td></tr><tr class="c11"><td class="c35" colspan="1" rowspan="1"><p class="c9"><span class="c15 c3">GIT_SERVER_REPLACEMENT</span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c9"><span class="c5">By default, quasar optional modules are fetched from their respective github location. Use this variable to replace the default URL base</span></p><p class="c9"><span class="c15 c3">https://github.com/</span></p><p class="c9"><span class="c5">with the variable value (example:</span></p><p class="c9"><span class="c15 c3">ssh://git@gitlab.cern.ch:7999/</span></p><p class="c9"><span>). This allows for example to profit from repository mirrors within private networks. The replacement mechanism can also be used in other CMake instruction sets within quasar project modules (see function definition in </span><span class="c3">FrameworkInternals/UrlHandling.cmake</span><span class="c5">).</span></p></td></tr></tbody></table><p class="c10"><span class="c5"></span></p><h1 class="c12" id="h.ps44wq6o7efp"><span class="c4">Build configuration files vs ProjectSettings.cmake</span></h2><p class="c16 c20"><span>The </span><span class="c3">ProjectSettings.cmake</span><span>&nbsp;file describes project settings which do not depend on the particular build scenario. At the time of writing the </span><span class="c3">ProjectSettings.cmake</span><span class="c5">&nbsp;would enable to control the following:</span></p><p class="c10"><span class="c5"></span></p><a id="t.0d45662d286254f4f106e5509a995b379d6d18ce"></a><a id="t.2"></a><table class="c24"><tbody><tr class="c11"><td class="c14 c21" colspan="1" rowspan="1"><p class="c9"><span class="c22">Setting name</span></p></td><td class="c31 c21" colspan="1" rowspan="1"><p class="c9"><span class="c22">Meaning</span></p></td></tr><tr class="c11"><td class="c14" colspan="1" rowspan="1"><p class="c9"><span class="c15 c3">CUSTOM_SERVER_MODULES</span></p></td><td class="c31" colspan="1" rowspan="1"><p class="c9"><span class="c5">List of custom server modules, described above.<br>Default: empty.</span></p></td></tr><tr class="c11"><td class="c14" colspan="1" rowspan="1"><p class="c9"><span class="c15 c3">EXECUTABLE</span></p></td><td class="c31" colspan="1" rowspan="1"><p class="c9"><span class="c5">Name of the executable file.</span></p><p class="c9"><span class="c5">Default: OpcUaServer</span></p><p class="c9"><span class="c5">Note: CMake will automatically append platform-dependent suffix, e.g. .exe for Windows.</span></p></td></tr><tr class="c11"><td class="c14" colspan="1" rowspan="1"><p class="c9"><span class="c3 c15">SERVER_INCLUDE_DIRECTORIES</span></p></td><td class="c31" colspan="1" rowspan="1"><p class="c9"><span class="c5">Additional include directories, might be evaluated from a CMake variable defined in a build config.</span></p><p class="c9"><span class="c5">Default: empty.</span></p></td></tr><tr class="c11"><td class="c14" colspan="1" rowspan="1"><p class="c9"><span class="c15 c3">SERVER_LINK_LIBRARIES</span></p></td><td class="c31" colspan="1" rowspan="1"><p class="c9"><span class="c5">Additional libs to link against, might be evaluated from a CMake variable defined in a build config.</span></p><p class="c9"><span class="c5">Default: empty.</span></p></td></tr><tr class="c11"><td class="c14" colspan="1" rowspan="1"><p class="c9"><span class="c15 c3">SERVER_LINK_DIRECTORIES</span></p></td><td class="c31" colspan="1" rowspan="1"><p class="c9"><span class="c5">Additional lib directories, might be evaluated from a CMake variable defined in a build config.</span></p><p class="c9"><span class="c5">Default: empty.</span></p></td></tr><tr class="c11"><td class="c14" colspan="1" rowspan="1"><p class="c9"><span class="c15 c3">BUILD_SERVER_SHARED_LIB</span></p></td><td class="c31" colspan="1" rowspan="1"><p class="c9"><span>If </span><span class="c3">ON</span><span class="c5">, the server will be built as a shared object in addition to a regular executable.</span></p><p class="c9"><span>Default: </span><span class="c15 c3">OFF</span></p></td></tr></tbody></table><p class="c10"><span class="c5"></span></p><p class="c16 c20"><span>There is always one </span><span class="c3">ProjectSettings.cmake</span><span class="c5">&nbsp;in your project.</span></p><h1 class="c12" id="h.it6qme5jd78d"><span class="c4">CMakeEpilogue.cmake</span></h2><p class="c16 c20"><span>In certain cases some additional CMake statements must be injected after the declaration of executable. CMake&#39;s </span><span class="c3">INSTALL()</span><span class="c5">&nbsp;statements are a good example of it.</span></p><p class="c10"><span class="c5"></span></p><p class="c16 c20"><span>If that is your case, put those into </span><span class="c3">CMakeEpilogue.cmake</span><span>. quasar&#39;s master </span><span class="c3">CMakeLists.txt</span><span>&nbsp;will notice the file and include its content at the end of master </span><span class="c15 c3">CMakeLists.txt</span></p><p class="c10"><span class="c5"></span></p><p class="c16 c20"><span>A good example of such an application is available in </span><span class="c3">Extra/yocto/CMakeEpilogue.cmake</span><span class="c5">&nbsp;in the quasar repo.</span></p><h1 class="c12" id="h.n8z5qax2cwem"><span class="c4">Recommendations to server developers</span></h2><ul class="c0 lst-kix_r3new9a30ppi-0 start"><li class="c7"><span>Never modify the master </span><span class="c15 c3">CMakeLists.txt</span></li><li class="c7"><span>Put relevant settings to </span><span class="c15 c3">ProjectSettings.cmake</span></li><li class="c7"><span class="c5">Use as many build configurations as you need. It is common to reuse build configurations between multiple OPC-UA server projects.</span></li></ul></body></html>
